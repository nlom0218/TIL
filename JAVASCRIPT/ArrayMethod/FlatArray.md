# ì¤‘ì²©ëœ ë°°ì—´ êµ¬ì¡° í‰íƒ„í™”í•˜ê¸°(flat, flatMap)

## 1. ê°œìš”

ES10(ECMAScript 2019)ì—ì„œ ë„ì…ëœ flat ë©”ì„œë“œì™€ flatMap ë©”ì„œë“œëŠ” ì¤‘ì²© ë°°ì—´ì„ í‰íƒ„í™”í•˜ëŠ” ì—­í• ì„ í•œë‹¤.
ì´ë²ˆ ì±•í„°ì—ì„œëŠ” í•´ë‹¹ ë©”ì„œë“œì— ëŒ€í•´ ì •ë¦¬í•´ ë³¸ë‹¤. ë³¸ê²©ì ì¸ ë‚´ìš©ì— ë“¤ì–´ê°€ê¸° ì•ì„œ ì¤‘ì²© ë°°ì—´ì´ë€ ë°°ì—´ì•ˆì— ë˜ ë‹¤ë¥¸ ë°°ì—´ì´
ì†í•´ ìˆëŠ” ê²ƒì´ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì•„ë˜ì™€ ê°™ì€ ë°°ì—´ì„ ì¤‘ì²© ë°°ì—´ì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤.

```javascript
const arr1 = ["a", "b", ["c"]];
const arr2 = ["a", "b", ["c", ["d"]]];
const arr3 = ["a", "b", ["c", ["d"]], "e"];
```

---

## 2. Array.flat()

- **íŠ¹ì§•**
  - ì¸ìˆ˜ë¡œ ì „ë‹¬í•œ ê¹Šì´ë§Œí¼ ì¬ê·€ì ìœ¼ë¡œ ë°°ì—´ì„ í‰íƒ„í™”
- **ë°˜í™˜ ê°’**: í•˜ìœ„ ë°°ì—´ì„ ì´ì–´ë¶™ì¸ ìƒˆë¡œìš´ ë°°ì—´
- **êµ¬ë¬¸**
  ```javascript
  const newArr = arr.flat([depth]);
  ```
- **ë§¤ê°œë³€ìˆ˜**
  - `depth`
    - ì¤‘ì²© ë°°ì—´ êµ¬ì¡°ë¥¼ í‰íƒ„í™”í•  ë•Œ ì‚¬ìš©í•  ê¹Šì´ ê°’
    - ê¸°ë³¸ê°’ì€ 1
    - ì¸ìˆ˜ë¡œ Infinityë¥¼ ì „ë‹¬í•˜ë©´ ì¤‘ì²© ë°°ì—´ ëª¨ë‘ë¥¼ í‰íƒ„í™”

ëª‡ê°€ì§€ì˜ ì˜ˆì‹œë¥¼ í†µí•´ `Array.flat()`ë©”ì„œë“œì˜ ì‚¬ìš©ë²•ì„ ì•Œì•„ë³´ì.

---

### 2-1. ì¤‘ì²© ë°°ì—´ í‰íƒ„í™”

- ì¤‘ì²© ë°°ì—´ì„ í‰íƒ„í™”í•˜ê¸° ìœ„í•œ ê¹Šì´ ê°’ì˜ ê¸°ë³¸ê°’ì€ 1ì´ë‹¤.

  ```javascript
  const arr = [1, [2, [3, [4]]]];
  const flat1 = arr.flat();
  const flat2 = arr.flat(1);
  ```

  ![flat 1](/image/JS/ArrayMethod/FlatArray/flat1.png)

- ì¤‘ì²© ë°°ì—´ì„ í‰íƒ„í™”í•˜ê¸° ìœ„í•œ ê¹Šì´ ê°’ì„ 2, 3ìœ¼ë¡œ ì§€ì •í•˜ì—¬ 2ë‹¨ê³„, 3ë‹¨ê³„ ê¹Šì´ê¹Œì§€ í‰íƒ„í™”í•œë‹¤.

  ```javascript
  const arr = [1, [2, [3, [4]]]];
  const flat1 = arr.flat(2);
  const flat2 = arr.flat(3);
  ```

  ![flat 2](/image/JS/ArrayMethod/FlatArray/flat2.png)

- ì¤‘ì²© ë°°ì—´ì„ í‰íƒ„í™”í•˜ê¸° ìœ„í•œ ê¹Šì´ ê°’ì„ Infinityë¡œ ì§€ì •í•˜ì—¬ ì¤‘ì²© ë°°ì—´ì„ ëª¨ë‘ í‰íƒ„í™”í•œë‹¤.

  ```javascript
  const arr = [1, [2, [3, [4]]], "a", ["b", ["c", "d", ["e"]]]];
  const flat = arr.flat(Infinity);
  ```

  ![flat 3](/image/JS/ArrayMethod/FlatArray/flat3.png)

---

### 2-2. ë°°ì—´ êµ¬ë© ì œê±°

`Array.flat()` ë©”ì„œë“œëŠ” ë°°ì—´ì˜ êµ¬ë©ì„ ì œê±°í•œë‹¤.

```javascript
const arr = [1, 2, 3, , [5]];
const flat = arr.flat();
```

![flat 4](/image/JS/ArrayMethod/FlatArray/flat4.png)

---

## 3. Array.flatMap()

- **íŠ¹ì§•**
  - `Array.map()` ë©”ì„œë“œë¥¼ í†µí•´ ìƒì„±ëœ ìƒˆë¡œìš´ ë°°ì—´ì„ í‰íƒ„í™”
  - ì¦‰, ë¨¼ì € ê° ì—˜ë¦¬ë¨¼íŠ¸ì— ëŒ€í•´ map ìˆ˜í–‰ í›„, ê²°ê³¼ë¥¼ ìƒˆë¡œìš´ ë°°ì—´ë¡œ í‰íƒ„í™”
  - `Array.flat()` ë©”ì„œë“œì²˜ëŸ¼ ì¸ìˆ˜ë¥¼ ì „ë‹¬í•˜ì—¬ í‰íƒ„í™” ê¹Šì´ë¥¼ ì§€ì •í•  ìˆ˜ ì—†ìŒ
  - 1ë‹¨ê³„ í‰íƒ„í™”ë§Œ ê°€ëŠ¥
  - ê¹Šì´ë¥¼ ì§€ì •í•˜ê¸° ìœ„í•´ì„œëŠ” `Array.map()` ë©”ì„œë“œì™€ `Array.flat()` ë©”ì„œë“œë¥¼ ê°ê° í˜¸ì¶œí•´ì•¼ í•¨
- **ë°˜í™˜ ê°’**: ê° ì—˜ë¦¬ë¨¼íŠ¸ê°€ callback í•¨ìˆ˜ì˜ ê²°ê³¼ì´ê³ , ê¹Šì´ 1ë¡œ í‰íƒ„í™”ëœ ìƒˆë¡œìš´ ë°°ì—´
- **êµ¬ë¬¸**
  ```javascript
   arr.flatMap(callback(currentValue[, index[, array]])[, thisArg])
  ```
- **ë§¤ê°œë³€ìˆ˜**
  - `callback`: ìƒˆë¡œìš´ ë°°ì—´ì˜ ì•¨ë¦¬ë¨¼íŠ¸ë¥¼ ìƒì„±í•˜ëŠ” í•¨ìˆ˜
    - `currentValue`: ë°°ì—´ì—ì„œ ì²˜ë¦¬ë˜ëŠ” í˜„ì¬ ì•¨ë¦¬ë¨¼íŠ¸
    - `index`: ë°°ì—´ì—ì„œ ì²˜ë¦¬ë˜ê³  ìˆëŠ” í˜„ì¬ ì—˜ë¦¬ë¨¼íŠ¸ì˜ ì¸ë±ìŠ¤
    - `array`: `map`ì´ í˜¸ì¶œëœ ë°°ì—´
  - `thisArg`: callback ì‹¤í–‰ì—ì„œ thisë¡œ ì‚¬ìš©í•  ê°’

ëª‡ê°€ì§€ì˜ ì˜ˆì‹œë¥¼ í†µí•´ `Array.flatMap()`ë©”ì„œë“œì˜ ì‚¬ìš©ë²•ì„ ì•Œì•„ë³´ì.

---

### 3-1. ë¬¸ì¥ìœ¼ë¡œ ë¶€í„° ë‹¨ì–´ì˜ ë¦¬ìŠ¤íŠ¸ë¥¼ ìƒì„±

```javascript
const arr = ["ì €ëŠ” íœ¼ë¥­í•œ ê°œë°œìê°€ ë˜ê³  ì‹¶ì€", "HDì…ë‹ˆë‹¤. ì˜ ë¶€íƒë“œë¦½ë‹ˆë‹¤!"];
const word = arr.flatMap((item) => item.split(" "));
```

![flatMap 1](/image/JS/ArrayMethod/FlatArray/flatMap1.png)

ë§Œì•½ `Array.flatMap` ë©”ì„œë“œê°€ ì•„ë‹Œ `Array.map()` ë©”ì„œë“œë§Œ ì‚¬ìš©í•˜ë©´ ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.

![flatMap 2 - use map method](/image/JS/ArrayMethod/FlatArray/flatMap2.png)

---

### 3-2. ì•„ì´í…œ ì¶”ê°€ ë° ì œê±°

ì•„ë˜ì˜ ì˜ˆì‹œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê³¼ì •ì„ ê±°ì¹©ë‹ˆë‹¤.

1. ê¸°ë…í’ˆì˜ ê¸ˆì•¡ì´ 5ë§Œì› ì´ìƒì´ë©´ ê¸°ë…í’ˆ í’ˆëª©ì—ì„œ ì œê±°í•©ë‹ˆë‹¤.
2. ê¸°ë…í’ˆì˜ ê¸ˆì•¡ì´ 2ë§Œì› ì´ìƒì´ë©´ 2ë§Œì›ì—ì„œ ì´ˆê³¼ëœ ê¸ˆì•¡ì„ í•¨ê»˜ í‘œì‹œí•©ë‹ˆë‹¤.
3. ê¸°ë…í’ˆì˜ ê¸ˆì•¡ì´ 2ë§Œì› ì•„ë˜ì´ë©´ ê·¸ëŒ€ë¡œ ë‹¤ì‹œ ë°˜í™˜í•©ë‹ˆë‹¤.

```javascript
const arr = [
  ["ì»µ", 6000],
  ["ê³ ë“±ì–´", 40000],
  ["í•œë¼ë´‰", 25000],
  ["í–¥ìˆ˜", 80000],
];

arr.flatMap(([item, price]) =>
  price > 50000
    ? []
    : price > 20000
    ? [[item, price, price - 20000]]
    : [[item, price]]
);
```

![flatMap 3](/image/JS/ArrayMethod/FlatArray/flatMap3.png)

`Array.map()` ë©”ì„œë“œì™€ `Array.filter()` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë‚˜íƒ€ë‚¼ ìˆ˜ ë„ ìˆë‹¤.(ì•„ë˜ ì½”ë“œ ì°¸ê³ )

```javascript
arr
  .map(([item, price]) =>
    price > 50000
      ? []
      : price > 20000
      ? [item, price, price - 20000]
      : [item, price]
  )
  .filter((item) => item.length !== 0);
```

---

## 4. Conclusion

> `Array.flat()` ë©”ì„œë“œì™€ `Array.flatMap()` ë©”ì„œë“œëŠ” ì²˜ìŒìœ¼ë¡œ ê³µë¶€í•œ ë©”ì„œë“œì´ë‹¤. ê·¸ë˜ì„œ ì•„ì§
> ì–´ë–¤ ìƒí™©ì—ì„œ ì‚¬ìš©í•´ì•¼ í• ì§€ ê°ì´ ì˜ ì¡íˆì§€ ì•ŠëŠ”ë‹¤. ë‹¤ë§Œ `Array.flatMap()`ì„ ì‚¬ìš©í•´ ìë£Œë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ
> ì •ë¦¬í•  ìˆ˜ ìˆë‹¤ëŠ” ëŠë‚Œì„ ë°›ì•˜ë‹¤. ìš”ì†Œì˜ ì œê±° ë¿ ì•„ë‹ˆë¼ ìˆ˜ì •, ì¶”ê°€ë„ ê°€ëŠ¥í•˜ë‹ˆ `Array.map()` ë©”ì„œë“œì™€
> `Array.filter()` ë©”ì„œë“œë¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ëŠë‚Œì´ ë“ ë‹¤. ë¬¼ë¡  ì•„ì§ ì¤‘ì²©ì„ ì˜ í™œìš©í•˜ì§„ ëª»í•˜ì§€ë§Œ ì•ìœ¼ë¡œ
> ë§ì€ ì½”ë“œë¥¼ ë³´ë©´ì„œ ì´ë²ˆ ì±•í„°ì—ì„œ ì •ë¦¬í•œ ë‘ ê°œì˜ ë©”ì„œë“œëŠ” ì ì ˆíˆ ê·¸ë¦¬ê³  ì ê·¹ì ìœ¼ë¡œ í™œìš©í•´ ë´ì•¼ê² ë‹¤. ì‹œë„í•  ìˆ˜ ìˆëŠ”
> ë°©ë²•ì´ í•˜ë‚˜ë” ëŠ˜ì–´ë‚œ ê²ƒ ê°™ë‹¤.ğŸ‘

---

## ì¶œì²˜

ë„ì„œ - ëª¨ë˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ Deep Dive: ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ê¸°ë³¸ ê°œë…ê³¼ ë™ì‘ ì›ë¦¬  
[MDN - Array.prototype.flat()](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Array/flat)  
[MDN - Array.prototype.flatMap()](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Array/flatMap)

---

ğŸ“… 2022-08-29
